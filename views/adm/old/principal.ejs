<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width initial-scale=1.0">
    <title><%= title %></title>
    <link href="/assets/vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/assets/vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="/assets/vendors/themify-icons/css/themify-icons.css" rel="stylesheet" />
    <link href="/assets/vendors/jvectormap/jquery-jvectormap-2.0.3.css" rel="stylesheet" />
    <link href="/assets/css/main.min.css" rel="stylesheet" />
	<link href="/assets/vendors/select2/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.0/sweetalert.min.js"></script>
    <style>
        .content-wrapper {
            position: relative;
            background-color: #f7f7f7;
            background-color: #f2f2f2;
            background-color: #f1f1f1;
            margin-left: 220px;
            padding: 0 15px 60px 15px;
                padding-top: 0px;
            -webkit-transition: margin .2s ease-in-out;
            -o-transition: margin .2s ease-in-out;
            transition: margin .2s ease-in-out;
            min-height: 1000px;
            }
        #lineModalLabel{
 
            font-family: "Roboto Condensed", sans-serif;
            font-optical-sizing: auto;
            /*font-weight: 900;*/
            font-style: normal;

        }
		.h4, h4 {
			font-size: 14px;
		}
		.select2-container .select2-selection--single {
		  box-sizing: border-box;
		  cursor: pointer;
		  display: block;
		  height: 35px;
		  user-select: none;
		  -webkit-user-select: none;
		  font-size: 15px;
		}
		.select2-container--default .select2-selection--single .select2-selection__arrow {
		  height: 26px;
		  position: absolute;
		  top: 1px;
		  right: 1px;
		  width: 20px;
		  margin-top: 1px;
		}
		
		.modal-fullscreen {
		  width: 100vw;
		  max-width: none;
		  height: 100%;
		  margin: 0;
		}
		.material-switch > input[type="checkbox"] {
		display: none;   
	}
	.material-switch > label {
		cursor: pointer;
		height: 0px;
		position: relative; 
		width: 40px;  
	}

	.material-switch > label::before {
		background: rgb(0, 0, 0);
		box-shadow: inset 0px 0px 10px rgba(0, 0, 0, 0.5);
		border-radius: 8px;
		content: '';
		height: 16px;
		margin-top: -8px;
		position:absolute;
		opacity: 0.3;
		transition: all 0.4s ease-in-out;
		width: 40px;
	}
	.material-switch > label::after {
		background: rgb(255, 255, 255);
		border-radius: 16px;
		box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);
		content: '';
		height: 24px;
		left: -4px;
		margin-top: -8px;
		position: absolute;
		top: -4px;
		transition: all 0.3s ease-in-out;
		width: 24px;
	}
	.material-switch > input[type="checkbox"]:checked + label::before {
		background: inherit;
		opacity: 0.5;
	}
	.material-switch > input[type="checkbox"]:checked + label::after {
		background: inherit;
		left: 20px;
	}
    </style>
</head>

<body class="fixed-navbar sidebar-mini">
    <div class="page-wrapper">
        <!-- START HEADER-->
        <header class="header">
            <div class="page-brand">
                <%- include('./../partials/logo.ejs') %>
            </div>
            <div class="flexbox flex-1">
                <!-- START TOP-LEFT TOOLBAR-->
                <ul class="nav navbar-toolbar">
                    <li>
                        <a class="nav-link sidebar-toggler js-sidebar-toggler"><i class="ti-menu"></i></a>
                    </li>
                    <li>
                       
                    </li>
                </ul>
                <!-- END TOP-LEFT TOOLBAR-->
                <!-- START TOP-RIGHT TOOLBAR-->
                <ul class="nav navbar-toolbar">
                    <!--<div class="material-switch pull-right" style="margin-right: 35px;">
						<a class="" style="margin-right: 25px;font-size: 18px;font-weight: bold;">Mostrar Valores</a>
						<input id="someSwitchOptionSuccess" name="someSwitchOption001" type="checkbox"/>
						<label for="someSwitchOptionSuccess" class="label-success"></label>
					</div>-->
                </ul>
                <!-- END TOP-RIGHT TOOLBAR-->
            </div>
        </header>
        <!-- END HEADER-->
        <!-- START SIDEBAR-->
        <nav class="page-sidebar" id="sidebar">
            <div id="sidebar-collapse">
                <div class="admin-block d-flex">
                    <div>
                        <img src="/admin-avatar.png" width="45px" />
                    </div>
                    <div class="admin-info">
                        <div class="font-strong">
							<%= user %>
						</div>
						<small>Administrator</small>
					</div>
                </div>
                <%- include('./../partials/sidebar.ejs') %>
               
            </div>
        </nav>
        <!-- END SIDEBAR-->
        <div class="content-wrapper">
            <!-- START PAGE CONTENT-->
            <div class="page-content fade-in-up">
                <div class="row">
						
					
					
					<% if(mostrar_boleto_dashboard=="1"){ %>
					<div class="col-lg-12">
						<div class="alert alert-danger"><strong>Atenção</strong> Seu boleto está disponivel <a href="<%= link_boleto %>" target="_blank" style="text-decoration: none;color: #000;font-size: 15px;margin-left: 10px;font-weight: bold;">Clique aqui</a>
							<!--<a class="alert-link" href="javascript:;">Alert link</a>-->
						</div>
					</div>
					<% } %>
                </div> 
			
                <div class="row">
			

					<div class="col-lg-12">
						<div class="row">
						
							<div class="col-lg-4 col-md-4">
									<div class="ibox bg-info color-white widget-stat" style="min-height:90px; margin-bottom: 5px;">
										<div class="ibox-body">
											<h2 class="m-b-5 font-strong" id="saudacao"></h2>
											<h3 style="font-size: 20px;font-weight: bold;"><%= user %> </h3>
											<h4 style="font-size: 18px;font-weight: bold;">Hoje é <a id="informacao_dia"></a></h4>
											
										</div>
									</div>
								</div>
								<div class="col-lg-4 col-md-4">
									<div class="ibox bg-success color-white widget-stat" style="margin-top: 0px;margin-bottom: 13px; min-height:117px;">
										<div class="ibox-body">
											<h2 class="m-b-5 font-strong" id="vlrTotalRecebidos" style="font-size: 40px;">R$ <a id=""></a></h2>
											<div class="m-b-5" >Entradas do Dia</div><i class="ti-bar-chart widget-stat-icon"></i>
							
										</div>
									</div>
								</div>
								<div class="col-lg-4 col-md-4">
									<div class="ibox bg-danger color-white widget-stat" style="min-height:117px;">
										<div class="ibox-body">
											<h2 class="m-b-5 font-strong" id="vlrTotalReceber" style="font-size: 40px;"></h2>
											<div class="m-b-5">Saidas do Dia</div><i class="ti-bar-chart widget-stat-icon"></i>
										</div>
									</div>
								</div>
								
						</div>
						
						<div class="ibox">
							<div class="ibox-head">
								<h2 class="font-bold" style="font-size: 22px;"></h2>
							</div>
							<div class="ibox-body">
								<table class="table datatable" id="datatable">
                            <thead>
                              <tr>
								<th>Condição de Pagamento</th>
                                <th>Total</th>
                              </tr>
                            </thead>
                            <tbody>
								<% relatorioCondipagto.forEach(dados=>{ %>
								<tr style="background-color:#ccc">
									
									<td><%= dados.condicao_pagamento %></td>
									<td><%= dados.total %></td>
								  </tr>
								<% }) %>
							</tbody>
						</table>
								
							</div>
						</div>
					</div>					

					<div class="col-lg-12">
                    <div class="ibox">
                        <div class="ibox-head">
							<h2 class="font-bold" style="font-size: 22px;">Lancamentos do Dia</h2>
                            <!--<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalExemplo">Adicionar Lancamentos</button>-->
                        </div>
                        <div class="ibox-body">
                          <table class="table datatable" id="datatable">
                            <thead>
                              <tr>
                                <th>Funcionário</th>
								<th>Cliente</th>
								<th>Documento</th>
								<th>Descrição</th>
								<th>Valor</th>
								<th>Data</th>
								<th>Condição Pagto.</th>
                              </tr>
                            </thead>
                            <tbody>
                                <% lancamentos.forEach(dados=>{ %>
									<% if(dados.saidas=="1"){ %>
										<tr style="background-color:#E9967A">
											<td><%= dados.Funcionario %></td>
											<td><%= dados.nome %></td>
											<td><%= dados.documento %></td>
											<td><%= dados.descricao %></td>
											<td><%= dados.valor %></td>
											<td><%= dados.data_externa %></td>
											<td><%= dados.condicao_pagamento %></td>
										  </tr>
									<%}else{ %>
										<%if(dados.descricao=="ABERTURA DE CAIXA"){ %>
											<tr style="background-color:#87CEEB;">
												<td><%= dados.Funcionario %></td>
												<td><%= dados.nome %></td>
												<td><%= dados.documento %></td>
												<td><%= dados.descricao %></td>
												<td><%= dados.valor %></td>
												<td><%= dados.data_externa %></td>
												<td><%= dados.condicao_pagamento %></td>
											  </tr>
										<%}else{ %>
											<tr>
												<td><%= dados.Funcionario %></td>
												<td><%= dados.nome %></td>
												<td><%= dados.documento %></td>
												<td><%= dados.descricao %></td>
												<td><%= dados.valor %></td>
												<td><%= dados.data_externa %></td>
												<td><%= dados.condicao_pagamento %></td>
										  </tr>
										<%}%>
										
									<%} %>
								
                              <% }) %>
                            </tbody>
                          </table>
                        </div>
                    </div>
                   
                </div>

                    
                </div>
                
            </div>
            <!-- END PAGE CONTENT-->
            <%- include('./../partials/footer.ejs') %>
        </div>
    </div>
	 <!-- MODAL PROFILE -->
		<%- include('./../partials/modal_cadastrar_clientes.ejs') %>
	<!-- FIM MODAL PROFILE -->
	
    <!-- MODAL PROFILE -->
		<%- include('./../partials/modal_cadastrar_usuarios.ejs') %>
	<!-- FIM MODAL PROFILE -->

    <!-- MODAL PROFILE -->
		<%- include('./../partials/modal_profile.ejs') %>
	<!-- FIM MODAL PROFILE -->
	



	
	<!-- Modal -->
	<div class="modal top fade " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-mdb-backdrop="true"      data-mdb-keyboard="true">
		<div class="modal-dialog modal-fullscreen">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
				</div>
				<div class="modal-body">
				
				
				
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
					<button  type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary">Save changes</button>
				</div>
			</div>
		</div>
	</div>
    <!-- BEGIN PAGA BACKDROPS-->
    <div class="sidenav-backdrop backdrop"></div>
    <div class="preloader-backdrop">
        <div class="page-preloader">Loading</div>
    </div>
<!-- End of LiveAgent integration script -->
	<script type="text/javascript" src="/jquery.min.js"></script>
	<script type="text/javascript" src="/jquery-ui.min.js"></script>
	 <script src="/jquery.mask.min.js"></script>
	<script src="/assets/vendors/select2/dist/js/select2.full.min.js" type="text/javascript"></script>
    <script src="/assets/vendors/popper.js/dist/umd/popper.min.js" type="text/javascript"></script>
    <script src="/assets/vendors/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/assets/vendors/metisMenu/dist/metisMenu.min.js" type="text/javascript"></script>
    
	<script src="/assets/vendors/select2/dist/js/select2.full.min.js" type="text/javascript"></script>
    <script src="/assets/vendors/jquery-knob/dist/jquery.knob.min.js" type="text/javascript"></script>
    <script src="/assets/vendors/moment/min/moment.min.js" type="text/javascript"></script>
    <script src="/assets/vendors/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
    <script src="/assets/vendors/bootstrap-timepicker/js/bootstrap-timepicker.min.js" type="text/javascript"></script>
    <script src="/assets/vendors/jquery-minicolors/jquery.minicolors.min.js" type="text/javascript"></script>
	
	<script src="/assets/js/app.min.js" type="text/javascript"></script>
	
	
	<script src="/assets/js/scripts/form-plugins.js" type="text/javascript"></script>
	<script src="/assets/js/principal.js" type="text/javascript"></script>
	
	<script type="text/javascript">
		$(document).ready(function() {
			//$('#exampleModal').modal('show');
			
			//console.log(formatarValor(<%= total_receber %>));
			const options = { style: 'currency', currency: 'BRL', minimumFractionDigits: 2, maximumFractionDigits: 3 }
			const formatNumber = new Intl.NumberFormat('pt-BR', options)
			
			//console.log(formatNumber.format(<%= valorSaidas %>));
			//console.log(formatNumber.format(<%= total_recebido	 %>));
			
			//let vlrSaidas = <%= valorSaidas %>;
			
			//console.log('valor de Saidas: ' +vlrSaidas)
			
			
			let vlrsaidas = <%= valorSaidas %>;
			
			var receber = formatNumber.format(vlrsaidas);
			var recebido = formatNumber.format(<%= entradasDia %>);
			
			document.getElementById("vlrTotalReceber").innerHTML=receber;
			document.getElementById("vlrTotalRecebidos").innerHTML=recebido;
			
			/*
			document.getElementById("vlrTotalReceber").innerHTML="******";
			document.getElementById("vlrTotalRecebidos").innerHTML="******";
			
			document.getElementById("someSwitchOptionSuccess").checked = false;
			
			
			var checkbox = document.getElementById("someSwitchOptionSuccess");
			checkbox.addEventListener('change', function () {
				if (checkbox.checked) {
					console.log('Checked');
					document.getElementById("vlrTotalReceber").innerHTML=receber;
					document.getElementById("vlrTotalRecebidos").innerHTML=recebido;
				} else {
					console.log('Not checked');
					document.getElementById("vlrTotalReceber").innerHTML="******";
					document.getElementById("vlrTotalRecebidos").innerHTML="******";
				}
			});
			*/
			
			$('#cadastrarUsuarios').click(function(){
				let uid_usuario = $('#uid_usuario').val();
				let id_empresa = $('#id_empresa').val();
				let nome = $('#nome').val();
				let email = $('#email').val();
				let senha = $('#senha').val();
				
				const funcionario = document.getElementById('funcionario');
  

				if (funcionario.checked) {
					_funcionario= "0";
				} else {
					_funcionario= "1";
				}
				$.post('/adm/cadasrtar_usuarios', {
					uid_usuario,
					id_empresa,					
					nome,
					email,
					senha,
					_funcionario
				}, function(resposta) {
					swal(resposta);
					setTimeout(() => {
					  window.location.href = "/adm/principal/"+uid_usuario;				  
					}, "1000");
				});
				
				
			})
			
			
		})
	</script>
	</body>

</html>
